<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Category: znc | さよならインターネット]]></title>
  <link href="http://blog.kenjiskywalker.org/blog/categories/znc/atom.xml" rel="self"/>
  <link href="http://blog.kenjiskywalker.org/"/>
  <updated>2014-12-17T13:39:07+09:00</updated>
  <id>http://blog.kenjiskywalker.org/</id>
  <author>
    <name><![CDATA[kenjiskywalker]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[ZNCでLimeChatをIRCクライアントにしてiPhoneだけBuffer効かせる設定とim.kayacの設定]]></title>
    <link href="http://blog.kenjiskywalker.org/blog/2013/03/20/znc-limechat-iphone/"/>
    <updated>2013-03-20T00:36:00+09:00</updated>
    <id>http://blog.kenjiskywalker.org/blog/2013/03/20/znc-limechat-iphone</id>
    <content type="html"><![CDATA[<blockquote><p>環境<br/>
ZNC vresion 1.0<br/>
LimeChat version 2.33<br/>
ZNC Packages from epel repository<br/>
- znc-1.0-0.1.alpha1.el6.x86_64<br/>
- znc-devel-1.0-0.1.alpha1.el6.x86_64<br/>
- znc-modperl-1.0-0.1.alpha1.el6.x86_64</p></blockquote>

<p>出先で、im.kayacの通知が来てて見ると<br/>
「kenjiskywalkerマジでクソ、サーバさわんな」みたいなことが話されてて<br/>
解脱〜、みたいな状況になった場合、iPhoneで直近の会話だけ<br/>
みたい場合があるので、その設定をした。</p>

<h4>参考:</h4>

<blockquote><p><a href="http://blog.handlena.me/entry/2013/01/20/185717">ZNCってひとつのアカウントで複数サーバーに接続できるよね？ - handlename&rsquo;s blog</a><br/>
<a href="http://soh335.hatenablog.com/entry/2013/01/29/170500">znc 内で keepbuffer on と off なものを作る - soh335 memo</a><br/>
<a href="http://blog.64p.org/entry/20120703/1341288920">znc で im.kayac をつかうための NotifyImKayacSimple.pm をかいた - tokuhirom&rsquo;s blog.</a></p></blockquote>

<h2>NotifyImKayacSimpleの設定</h2>

<p><a href="http://d.hatena.ne.jp/sugyan/20120320/1332254901">特定のキーワードをim.kayac.comに通知するZNCモジュール書いた - すぎゃーんメモ</a><br/>
このすぎゃーんさんのメモの&#8217;-fPIC&#8217;の設定を有効にした記憶がある。あまり覚えてない。</p>

<p><code>~/.znc/modules/NotifyImkayacSimple.pm</code>に置いて
<em>LoadModule = modperl</em>して、<br/>
<em>NotifyImkayacSimple username=username keyword=key1,key2</em>で通知が来ると思う。</p>

<p>設定書いて間違っていればzncが起動しないので、その辺で確認できると思う。<br/>
デバッグモードを有効にするのもアリだと思う。</p>

<h2>zncの設定</h2>

<pre><code>// WARNING
//
// Do NOT edit this file while ZNC is running!
// Use webadmin or *admin instead.
//
// Buf if you feel risky, you might want to read help on /znc saveconfig and /znc rehash.
// Also check http://en.znc.in/wiki/Configuration

...

&lt;Listener listener0&gt;

    ...

&lt;/Listener&gt;

&lt;User hotoke&gt;

    ...

    LoadModule = modperl
    AutoClearChanBuffer = false

    &lt;Network default&gt;

        ...
        LoadModule = NotifyImkayacSimple username=hotoke keyword=涅槃,解脱,成仏
        Server = hoge.example.com
        Buffer = 100

        &lt;Chan #buddha&gt;
        &lt;/Chan&gt;
    &lt;/Network&gt;

    &lt;Network freenode&gt;

        ...
        LoadModule = NotifyImkayacSimple username=hotoke keyword=灌仏会
        Server = irc.freenode.net 6667
        Buffer = 1

        &lt;Chan #isucon&gt;
        &lt;/Chan&gt;

        &lt;Chan #monitoring-casual&gt;
        &lt;/Chan&gt;
    &lt;/Network&gt;

    &lt;Network perl&gt;

        ...
        LoadModule = NotifyImkayacSimple username=hotoke keyword=解脱
        Server = irc.perl.org 6667
        Buffer = 10

        &lt;Chan #ark&gt;
        &lt;/Chan&gt;

        &lt;Chan #dbi-ja&gt;
        &lt;/Chan&gt;

        &lt;Chan #prepan&gt;
        &lt;/Chan&gt;
    &lt;/Network&gt;

    &lt;Pass password&gt;
        ...
    &lt;/Pass&gt;
&lt;/User&gt;

&lt;User limechat&gt;

     AutoClearChanBuffer = true
     Buffer = 500

    &lt;Network znc&gt;
        ...
        Server = 127.0.0.1 +6669 [zncのパスワード]

    &lt;/Network&gt;

    &lt;Pass password&gt;
        ...
    &lt;/Pass&gt;
&lt;/User&gt;
</code></pre>

<p>こんな感じで設定している。</p>

<p>Userひとつで複数のNetworkに入れる。</p>

<blockquote><p>PC => loginname: limechat/znc<br/>
iPhone => loginname: hotoke/default, hotoke/freenode, hotoke/perl</p></blockquote>

<p>みたいな感じにして、PC側は<em>AutoClearChanBuffer</em>を有効にして<br/>
既読にしたものは消していって、iPhoneで接続する方は<br/>
毎回過去の履歴が見れるようになる。</p>

<p>これで出先で社内IRCで椅子がとんできても大丈夫なようになる。<br/>
仏像彫刻教室情報お待ちしております。</p>
]]></content>
  </entry>
  
</feed>
